module "wrapper" {
  source = "../"

  for_each = var.items

  create                               = lookup(each.value, "create", true)
  name                                 = lookup(each.value, "name", false)
  ami                                  = lookup(each.value, "ami", "")
  associate_public_ip_address          = lookup(each.value, "associate_public_ip_address", null)
  availability_zone                    = lookup(each.value, "availability_zone", null)
  capacity_reservation_specification   = lookup(each.value, "capacity_reservation_specification", null)
  cpu_credits                          = lookup(each.value, "cpu_credits", null)
  disable_api_termination              = lookup(each.value, "disable_api_termination", null)
  ebs_block_device                     = lookup(each.value, "acl", [])
  ebs_optimized                        = lookup(each.value, "ebs_optimized", null)
  enclave_options_enabled              = lookup(each.value, "enclave_options_enabled", null)
  ephemeral_block_device               = lookup(each.value, "ephemeral_block_device", [])
  get_password_data                    = lookup(each.value, "get_password_data", null)
  hibernation                          = lookup(each.value, "hibernation", null)
  host_id                              = lookup(each.value, "host_id", null)
  iam_instance_profile                 = lookup(each.value, "iam_instance_profile", null)
  instance_initiated_shutdown_behavior = lookup(each.value, "instance_initiated_shutdown_behavior", null)
  instance_type                        = lookup(each.value, "instance_type", "t3.micro")
  ipv6_address_count                   = lookup(each.value, "ipv6_address_count", null)
  ipv6_addresses                       = lookup(each.value, "ipv6_addresses", null)
  key_name                             = lookup(each.value, "key_name", null)
  launch_template                      = lookup(each.value, "launch_template", null)
  metadata_options                     = lookup(each.value, "metadata_options", {})
  monitoring                           = lookup(each.value, "monitoring", false)
  network_interface                    = lookup(each.value, "network_interface", [])
  placement_group                      = lookup(each.value, "placement_group", null)
  private_ip                           = lookup(each.value, "private_ip", null)
  root_block_device                    = lookup(each.value, "root_block_device", [])
  secondary_private_ips                = lookup(each.value, "secondary_private_ips", null)
  source_dest_check                    = lookup(each.value, "source_dest_check", true)
  subnet_id                            = lookup(each.value, "subnet_id", null)
  tags                                 = lookup(each.value, "tags", {})
  tenancy                              = lookup(each.value, "tenancy", null)
  user_data                            = lookup(each.value, "user_data", null)
  user_data_base64                     = lookup(each.value, "user_data_base64", null)
  volume_tags                          = lookup(each.value, "volume_tags", {})
  enable_volume_tags                   = lookup(each.value, "enable_volume_tags", true)
  vpc_security_group_ids               = lookup(each.value, "vpc_security_group_ids", null)
  timeouts                             = lookup(each.value, "timeouts", {})
  cpu_core_count                       = lookup(each.value, "cpu_core_count", null)
  cpu_threads_per_core                 = lookup(each.value, "cpu_threads_per_core", null)
  create_spot_instance                 = lookup(each.value, "create_spot_instance", false)
  spot_price                           = lookup(each.value, "spot_price", null)
  spot_wait_for_fulfillment            = lookup(each.value, "spot_wait_for_fulfillment", null)
  spot_type                            = lookup(each.value, "spot_type", null)
  spot_launch_group                    = lookup(each.value, "spot_launch_group", null)
  spot_block_duration_minutes          = lookup(each.value, "spot_block_duration_minutes", null)
  spot_instance_interruption_behavior  = lookup(each.value, "spot_instance_interruption_behavior", null)
  spot_valid_until                     = lookup(each.value, "spot_valid_until", null)
  spot_valid_from                      = lookup(each.value, "spot_valid_from", null)
}
